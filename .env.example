# Musicr Environment Configuration
# Copy this to .env and update with your values

# ============================================================================
# DATABASE
# ============================================================================

# PostgreSQL connection string with pgvector extension support
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
DATABASE_URL="postgresql://musicr:password@localhost:5432/musicr?schema=public"

# Railway PostgreSQL (auto-provided if using Railway addon)
# If DATABASE_URL not set, will auto-construct from PG* variables:
# PGHOST, PGPORT, PGDATABASE, PGUSER, PGPASSWORD

# ============================================================================
# SERVER
# ============================================================================

# Environment mode
NODE_ENV=development

# API server port
PORT=4000

# API bind address (0.0.0.0 for all interfaces, localhost for local only)
HOST=0.0.0.0

# CORS allowed origins (comma-separated for multiple)
FRONTEND_ORIGIN=http://localhost:5173

# Session cookie secret (REQUIRED in production, generate with: openssl rand -hex 32)
# COOKIE_SECRET=your-64-character-random-string-here

# ============================================================================
# EMBEDDINGS & AI
# ============================================================================

# OpenAI API key (OPTIONAL - local Xenova model used by default)
# OPENAI_API_KEY=sk-your-openai-api-key-here

# ============================================================================
# FRONTEND
# ============================================================================

# API URL for frontend (auto-detected from window.location if not set)
# VITE_API_URL=http://localhost:4000

# ============================================================================
# PERFORMANCE & LIMITS
# ============================================================================

# Node.js memory limit (in MB)
# NODE_OPTIONS=--max-old-space-size=1024

# WebSocket ping interval (ms)
# WS_PING_INTERVAL=30000

# WebSocket connection timeout (ms)
# WS_CONNECTION_TIMEOUT=60000

# Rate limiting (requests per window per IP)
# RATE_LIMIT_MAX=100
# RATE_LIMIT_WINDOW=60000

# ============================================================================
# LOGGING
# ============================================================================

# Log level: debug | info | warn | error
LOG_LEVEL=info

# Enable detailed matching debug logs (shows embedding details)
# DEBUG_MATCHING=1

# ============================================================================
# DEVELOPMENT HELPERS
# ============================================================================

# Prisma query logging
# DEBUG=prisma:query

# ============================================================================
# PRODUCTION NOTES
# ============================================================================

# Required for production:
# - DATABASE_URL (with sslmode=require for hosted databases)
# - COOKIE_SECRET (must be set, minimum 32 characters)
# - FRONTEND_ORIGIN (set to your actual domain)
# - NODE_ENV=production

# Railway deployment:
# - DATABASE_URL auto-provided by PostgreSQL addon
# - Set COOKIE_SECRET in Railway dashboard
# - Set FRONTEND_ORIGIN to your Railway web service URL
# - Other variables inherit sensible defaults

# Security:
# - Never commit .env file to version control
# - Rotate COOKIE_SECRET periodically in production
# - Use strong PostgreSQL passwords
# - Enable SSL for database connections in production
